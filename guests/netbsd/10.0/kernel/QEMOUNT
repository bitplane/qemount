#
# QEMOUNT - NetBSD kernel config for qemount guest
#
# Based on GENERIC with memory disk root support for ramdisk boot
#

include "arch/amd64/conf/GENERIC"

ident		"QEMOUNT"

# Memory disk (md) for ramdisk root - md device already in GENERIC
# GENERIC sets MEMORY_DISK_DYNAMIC which makes md_root_image a pointer, not an array
# We need to unset it so mdsetimage can embed a ramdisk into the static array
no options 	MEMORY_DISK_DYNAMIC
options 	MEMORY_DISK_HOOKS		# enable md_root_image symbol for mdsetimage
options 	MEMORY_DISK_IS_ROOT
options 	MEMORY_DISK_ROOT_SIZE=32768	# 16MB in 512-byte sectors
options 	MEMORY_DISK_RBFLAGS=RB_SINGLE	# Boot single-user

# Serial console for QEMU - handled via boot.cfg consdev=com0

# Additional filesystems (not in GENERIC by default)
file-system	UDF		# UDF (DVD/Blu-ray)
file-system	ADOSFS		# AmigaDOS
file-system	HFS		# Apple HFS+ (read-only)
file-system	V7FS		# 7th Edition Unix
file-system	FILECORE	# Acorn RISC OS
