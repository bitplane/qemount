# Kernel overrides from defconf for Linux 2.6.39

# Virtio support (available since 2.6.25)
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_NET=y
# VirtIO Serial (available since 2.6.27)
CONFIG_VIRTIO_SERIAL=y
CONFIG_VIRTIO_CONSOLE=y

# 9P filesystem support (available since 2.6.17)
CONFIG_NET_9P=y
CONFIG_NET_9P_VIRTIO=y
CONFIG_9P_FS=y
CONFIG_9P_FS_POSIX_ACL=y

# Boot requirements
CONFIG_BLK_DEV_INITRD=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# Serial console
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y

# Required for initramfs
CONFIG_RD_GZIP=y
CONFIG_INITRAMFS_SOURCE=""

# Disable graphics
CONFIG_AGP=n
CONFIG_DRM=n

# Disable legacy ATA/IDE (using virtio)
CONFIG_ATA=n

# Disable CD-ROM
CONFIG_BLK_DEV_SR=n
CONFIG_CDROM=n

# Disable network drivers (not using network)
CONFIG_ETHERNET=n
CONFIG_FDDI=n

# Disable USB stack
CONFIG_USB=n

# Disable PS/2 keyboard/mouse (serial console only)
CONFIG_SERIO_I8042=n
CONFIG_KEYBOARD_ATKBD=n
CONFIG_MOUSE_PS2=n
CONFIG_HID=n

# Disable IPv6
CONFIG_IPV6=n

# Disable unused network filesystems/protocols
CONFIG_AF_RXRPC=n
CONFIG_AFS_FS=n
CONFIG_CEPH_FS=n

# Disable WiFi
CONFIG_CFG80211=n
CONFIG_WIRELESS=n

# Disable sound
CONFIG_SOUND=n

# Disable netconsole
CONFIG_NETCONSOLE=n

# Disable security/audit (not needed in VM)
CONFIG_SECURITY_SELINUX=n
CONFIG_AUDIT=n

# Disable netfilter (no firewall needed)
CONFIG_NETFILTER=n

# Disable EFI (BIOS boot only)
CONFIG_EFI_VARS=n

# Disable PCI hotplug
CONFIG_HOTPLUG_PCI=n

# Disable kernel debugging/tracing
CONFIG_KPROBES=n
CONFIG_FTRACE=n

# Disable jitter entropy (using virtio-rng instead)
CONFIG_JITTERENTROPY_RNG=n

# Disable SCSI (using virtio-blk)
CONFIG_SCSI=n

# Disable RF kill switch (no wireless)
CONFIG_RFKILL=n

# Disable VGA arbitration (no graphics)
CONFIG_VGA_ARB=n

# Disable huge pages (small VM)
CONFIG_HUGETLBFS=n

# Serial console (virtio-console doesn't show early boot)
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y

# Disable e1000 explicitly (CONFIG_ETHERNET may not work on 2.6)
CONFIG_E1000=n

# Disable PnP entirely
CONFIG_PNP=n

# Disable legacy RAM block device
CONFIG_BLK_DEV_RAM=n
